<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "\/"
        },
        "articleSection" : "blog",
        "name" : "Rplicate Series: Cherry Bomb",
        "headline" : "Rplicate Series: Cherry Bomb",
        "description" : "In this second article on Rplicate Series, We will share to you one way to replicate the plot titled Cherry Bomb from the article \x26ldquo;Japan’s cherry blossoms are emerging increasingly early, 7th April 2017\x26rdquo;. The raw dataset used for this graph was obtained from a phenological dataset that was previously collected by Dr. Yasuyuki Aono from Osaka Prefecture University12.\n {width=\x26ldquo;60%\x26rdquo;} \nWhile replicating the plot, we will also learn how to:",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2020",
        "datePublished": "2020-10-02 00:00:00 \x2b0000 UTC",
        "dateModified" : "2020-10-02 00:00:00 \x2b0000 UTC",
        "url" : "\/blog\/rplicate-series-cherry-bomb\/",
        "wordCount" : "1907",
        "keywords" : [ "Data Visualization","ggplot2","Rplicate","Blog" ]
    }
    </script>
        
            
                <title>Rplicate Series: Cherry Bomb</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.55.4" />
        
  
    
  

  

  <link rel="apple-touch-icon-precomposed" href='/favicon/apple-touch-icon-precomposed.png'>
  <link rel="icon" href='/favicon/favicon.png'>
  
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content='/favicon/mstile.png'>
  <meta name="application-name" content="Algoritma Technical Blog">
  <meta name="msapplication-tooltip" content="To learn more about our approach to data science problems, feel free to hop over to our blog.">
  <meta name="msapplication-config" content='/favicon/ieconfig.xml'>



        
            <meta name="author" content="Nabiilah Ardini Fauziyyah">
        
        
            
                <meta name="description" content="To learn more about our approach to data science problems, feel free to hop over to our blog.">
            
        

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Rplicate Series: Cherry Bomb"/>
<meta name="twitter:description" content="In this second article on Rplicate Series, We will share to you one way to replicate the plot titled Cherry Bomb from the article &ldquo;Japan’s cherry blossoms are emerging increasingly early, 7th April 2017&rdquo;. The raw dataset used for this graph was obtained from a phenological dataset that was previously collected by Dr. Yasuyuki Aono from Osaka Prefecture University12.
 {width=&ldquo;60%&rdquo;} 
While replicating the plot, we will also learn how to:"/>
<meta name="twitter:site" content="@teamalgoritma"/>

        <meta property="og:title" content="Rplicate Series: Cherry Bomb" />
<meta property="og:description" content="In this second article on Rplicate Series, We will share to you one way to replicate the plot titled Cherry Bomb from the article &ldquo;Japan’s cherry blossoms are emerging increasingly early, 7th April 2017&rdquo;. The raw dataset used for this graph was obtained from a phenological dataset that was previously collected by Dr. Yasuyuki Aono from Osaka Prefecture University12.
 {width=&ldquo;60%&rdquo;} 
While replicating the plot, we will also learn how to:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/blog/rplicate-series-cherry-bomb/" />
<meta property="article:published_time" content="2020-10-02T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2020-10-02T00:00:00&#43;00:00"/>

        <meta property="og:image" content="//images/logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="512">
        <meta property="og:image:height" content="512">
        
<meta itemprop="name" content="Rplicate Series: Cherry Bomb">
<meta itemprop="description" content="In this second article on Rplicate Series, We will share to you one way to replicate the plot titled Cherry Bomb from the article &ldquo;Japan’s cherry blossoms are emerging increasingly early, 7th April 2017&rdquo;. The raw dataset used for this graph was obtained from a phenological dataset that was previously collected by Dr. Yasuyuki Aono from Osaka Prefecture University12.
 {width=&ldquo;60%&rdquo;} 
While replicating the plot, we will also learn how to:">


<meta itemprop="datePublished" content="2020-10-02T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-10-02T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1907">



<meta itemprop="keywords" content="Data Visualization,ggplot2,Rplicate," />

        

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css">
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/add-on.css">
            <link rel="stylesheet" href="/css/academicons.min.css">
            <link href="/lib/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
            <link href="/lib/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
            <link href="/lib/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet">
            <link href="/lib/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet">
        

        
            
                
            
                
                    <link rel="stylesheet" href="/css/main.css">
                
            
        


  
    
      <link rel="stylesheet" href="/css/night-owl.css" rel="stylesheet" id="theme-stylesheet">
      <script src="/js/highlight.pack.js"></script>
      <script>hljs.initHighlightingOnLoad();</script>
  


      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-164959107-2', 'auto');
	
	ga('send', 'pageview');
}
</script>






    </head>
    <body>

      
      <div id="wrapper">

    
    
<header id="header">
    
      <h1><a href="/">blog</a></h1>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/">
                            <i class="fa fa-home">&nbsp;</i>Home
                    </a>
                </li>
            
                <li>
                    <a href="/tags/machine-learning/">
                            <i class="fa fa-cog">&nbsp;</i>Machine Learning
                    </a>
                </li>
            
                <li>
                    <a href="/tags/data-visualization/">
                            <i class="fa fa-area-chart">&nbsp;</i>Data Visualization
                    </a>
                </li>
            
                <li>
                    <a href="/tags/">
                            <i class="fa fa-list">&nbsp;</i>Article List
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="as_sitesearch" value="/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="as_sitesearch" value="/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/">
                            <h3>
                                <i class="fa fa-home">&nbsp;</i>Home
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags/machine-learning/">
                            <h3>
                                <i class="fa fa-cog">&nbsp;</i>Machine Learning
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags/data-visualization/">
                            <h3>
                                <i class="fa fa-area-chart">&nbsp;</i>Data Visualization
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags/">
                            <h3>
                                <i class="fa fa-list">&nbsp;</i>Article List
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section class="recent-posts">
            <div class="mini-posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                

                
                    
                

                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/rplicate-i-can-t-get-no/">Rplicate Series: I can&#39;t get no ...</a></h3>
                                
                                <time class="published" datetime=
                                    '2020-10-26'>
                                    October 26, 2020</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/topic-modeling-lda/">Topic Modelling with Latent Dirichlet Allocation (LDA)</a></h3>
                                
                                <time class="published" datetime=
                                    '2020-10-26'>
                                    October 26, 2020</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/one-way-anova-test-in-r/">One-Way ANOVA Test in R</a></h3>
                                
                                <time class="published" datetime=
                                    '2020-10-21'>
                                    October 21, 2020</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/interpreting-black-box-regression-model-with-lime/">Interpreting Black Box Regression Model with LIME</a></h3>
                                
                                <time class="published" datetime=
                                    '2020-10-20'>
                                    October 20, 2020</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/rplicate-series-cherry-bomb/">Rplicate Series: Cherry Bomb</a></h3>
                                
                                <time class="published" datetime=
                                    '2020-10-02'>
                                    October 2, 2020</time>
                            </header>
                            

                        </article>
                

                
                    <a href=
                        
                            /blog/
                        
                        class="button">View more posts</a>
                
            </div>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            



<li>
  <a href="https://twitter.com/intent/tweet?text=Rplicate%20Series%3a%20Cherry%20Bomb by Nabiilah%20Ardini%20Fauziyyah&amp;url=%2fblog%2frplicate-series-cherry-bomb%2f" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>








<li>
  <a href="https://www.facebook.com/sharer.php?u=%2fblog%2frplicate-series-cherry-bomb%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>







<li>
  <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fblog%2frplicate-series-cherry-bomb%2f&amp;title=Rplicate%20Series%3a%20Cherry%20Bomb" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>











        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
  <header>
    <div class="title">
        
            <h2><a href="/blog/rplicate-series-cherry-bomb/">Rplicate Series: Cherry Bomb</a></h2>
        
        
    </div>
    <div class="meta">
        

        <time class="published"
            datetime='2020-10-02'>
            October 2, 2020</time>
        <span class="author"><a href="https://github.com/NabiilahArdini">Nabiilah Ardini Fauziyyah</a></span>
        
            <p>9 minute read</p>
        
        
    </div>
</header>


  
    <section id="social-share">
      <ul class="icons">
        



<li>
  <a href="https://twitter.com/intent/tweet?text=Rplicate%20Series%3a%20Cherry%20Bomb by Nabiilah%20Ardini%20Fauziyyah&amp;url=%2fblog%2frplicate-series-cherry-bomb%2f" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>








<li>
  <a href="https://www.facebook.com/sharer.php?u=%2fblog%2frplicate-series-cherry-bomb%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>







<li>
  <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fblog%2frplicate-series-cherry-bomb%2f&amp;title=Rplicate%20Series%3a%20Cherry%20Bomb" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>











      </ul>
    </section>
  

  

  <div id="content">
    

<p>In this second article on <strong>Rplicate Series</strong>, We will share to you one way to replicate the plot titled <strong>Cherry Bomb</strong> from the article <a href="https://www.economist.com/graphic-detail/2017/04/07/japans-cherry-blossoms-are-emerging-increasingly-early">&ldquo;Japan’s cherry blossoms are emerging increasingly early, 7th April 2017&rdquo;</a>. The raw dataset used for this graph was obtained from a <a href="http://atmenv.envi.osakafu-u.ac.jp/aono/kyophenotemp4/">phenological dataset</a> that was previously collected by Dr. Yasuyuki Aono from Osaka Prefecture University<sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup><sup class="footnote-ref" id="fnref:2"><a href="#fn:2">2</a></sup>.</p>

<p><center> <img src="/img/rplicate2/cherrybomb.png" alt="" />{width=&ldquo;60%&rdquo;} </center></p>

<p>While replicating the plot, we will also learn how to:</p>

<ul>
<li>various data pre-processing tricks such as separate a column into several columns, create date data from several columns, and reverse levels of a categorical column</li>
<li>create a scatterplot with a custom shape/image as points</li>
<li>using <code>geom_smooth()</code> for visualizing trend in the data</li>
<li>explore facets and various theme editing on ggplot2</li>
</ul>

<p>Let&rsquo;s dive in below!</p>

<h1 id="load-packages">Load Packages</h1>

<p>These are the basic packages that we will use. Along the way, there will be some packages that we will load just before its use to better understand and remember its functionality.</p>

<pre><code class="language-r">library(dplyr) # to simplify data transformation
library(tidyr) # to tidying data
library(lubridate) # to deal with date
library(ggplot2) # to create plot
</code></pre>

<h1 id="import-dataset">Import Dataset</h1>

<p>The first thing we have to do is to load the dataset into R.</p>

<pre><code class="language-r">sakura &lt;- read.csv(&quot;data_input/sakura.csv&quot;)
tail(sakura)
</code></pre>

<pre><code>#&gt;        AD full.flowering.doy full.flowering.date source data.type
#&gt; 1213 2013                 93                 403      8         0
#&gt; 1214 2014                 94                 404      8         0
#&gt; 1215 2015                 93                 403      8         0
#&gt; 1216 2016                 NA                 404      8         0
#&gt; 1217 2017                 NA                 409      8         0
#&gt; 1218 2018                 NA                 330      8         0
#&gt;                   reference
#&gt; 1213 NEWS-PAPER(ARASHIYAMA)
#&gt; 1214 NEWS-PAPER(ARASHIYAMA)
#&gt; 1215 NEWS-PAPER(ARASHIYAMA)
#&gt; 1216 NEWS-PAPER(ARASHIYAMA)
#&gt; 1217 NEWS-PAPER(ARASHIYAMA)
#&gt; 1218 NEWS-PAPER(ARASHIYAMA)
</code></pre>

<p>These are the descriptions of each column:</p>

<ul>
<li><strong>AD</strong>: year in A.D.</li>
<li><strong>full.flowering.doy</strong>: full flowering day of year</li>
<li><strong>full.flowering.date</strong>: full flowering date (eg.: 401 = April 1st)</li>
<li><strong>source</strong>: source code</li>
<li><strong>data.type</strong>: data source code</li>
<li><strong>reference</strong>: name of old document/references</li>
</ul>

<h1 id="data-wrangling">Data Wrangling</h1>

<p>The next step is <em>data wrangling</em> or the process of tidying and transforming data from a raw dataset into another format that is easier for plotting.</p>

<pre><code class="language-r"># selecting column for plotting
sakura &lt;- sakura %&gt;% 
  select(AD, full.flowering.date)

sample_n(sakura,6) # sampling rows
</code></pre>

<pre><code>#&gt;     AD full.flowering.date
#&gt; 1 1367                 407
#&gt; 2 1344                 411
#&gt; 3  886                  NA
#&gt; 4 1528                 415
#&gt; 5  978                  NA
#&gt; 6 1045                  NA
</code></pre>

<p>After some exploration, we find that most of the data came from early AD contain missing records of its full flowering date. Therefore, the next step is to obtain the data with no missing values on its <code>full.flowering.date</code>, and for better visualization, we can also rename the &ldquo;AD&rdquo; column to &ldquo;Year&rdquo;.</p>

<pre><code class="language-r">sakura.used &lt;- sakura %&gt;% 
  filter(full.flowering.date != &quot;NA&quot;) %&gt;% 
  rename(Year=AD)

head(sakura.used)
</code></pre>

<pre><code>#&gt;   Year full.flowering.date
#&gt; 1  812                 401
#&gt; 2  815                 415
#&gt; 3  831                 406
#&gt; 4  851                 418
#&gt; 5  853                 414
#&gt; 6  864                 409
</code></pre>

<p>If you see the data above, the <em>month</em> and <em>day of month</em> information is still stored in one column <code>full.flowering.date</code>. Meanwhile, we need both information separately to display it on the y-axis. Moreover, it is still stored in an integer format with no separator between both information. We will need to separate both information into different columns. To do that, we can use the <code>separate()</code> function, as seen below:</p>

<pre><code class="language-r">sakura.plot &lt;- sakura.used %&gt;% 
  separate(full.flowering.date, 
           into = c(&quot;month&quot;, &quot;day&quot;), # name of the new columns
           sep = -2) # separate from the last 2 digits

head(sakura.plot)
</code></pre>

<pre><code>#&gt;   Year month day
#&gt; 1  812     4  01
#&gt; 2  815     4  15
#&gt; 3  831     4  06
#&gt; 4  851     4  18
#&gt; 5  853     4  14
#&gt; 6  864     4  09
</code></pre>

<p>Now, we only need to remove the leading zero of some digits in the <code>day</code> column. We can use the function <code>f_num()</code> from <strong>numform</strong> package. The numform package contains various functions to format numbers for publication.</p>

<pre><code class="language-r">library(numform)

sakura.plot &lt;- sakura.plot %&gt;% 
  mutate(day = f_num(day, 
                     digits = 0)) # to set for 0 number behind decimal point 

head(sakura.plot)
</code></pre>

<pre><code>#&gt;   Year month day
#&gt; 1  812     4   1
#&gt; 2  815     4  15
#&gt; 3  831     4   6
#&gt; 4  851     4  18
#&gt; 5  853     4  14
#&gt; 6  864     4   9
</code></pre>

<p>The next step we are going to do is to combine year, month, and day information into a full date format. Let&rsquo;s store it into a column named <code>date</code>. After that, let&rsquo;s replace the month value into its respective month label. We can also change the data type of column <code>day</code> into integers, or just replace it with the day information obtained from the column <code>date</code>.</p>

<pre><code class="language-r">sakura.plot &lt;- sakura.plot %&gt;% 
  mutate(date = as.Date(paste(Year, month, day, sep = &quot;-&quot;)),
         month = month(date, label = T, abbr = F),
         day = day(date))
  

head(sakura.plot)
</code></pre>

<pre><code>#&gt;   Year month day       date
#&gt; 1  812 April   1 0812-04-01
#&gt; 2  815 April  15 0815-04-15
#&gt; 3  831 April   6 0831-04-06
#&gt; 4  851 April  18 0851-04-18
#&gt; 5  853 April  14 0853-04-14
#&gt; 6  864 April   9 0864-04-09
</code></pre>

<pre><code class="language-r">unique(sakura.plot$month)
</code></pre>

<pre><code>#&gt; [1] April Maret Mei  
#&gt; 12 Levels: Januari &lt; Februari &lt; Maret &lt; April &lt; Mei &lt; Juni &lt; ... &lt; Desember
</code></pre>

<p>If we look at the order of our <code>month</code> column, it is still in the reverse format. We can reverse the order of the levels by using the function <code>fct_rev()</code> from <strong>forcats</strong> package. Forcats package itself contains many functions form working with categorical variables/factors.</p>

<pre><code class="language-r">sakura.plot &lt;- sakura.plot %&gt;% 
  mutate(month = forcats::fct_rev(month))

unique(sakura.plot$month)
</code></pre>

<pre><code>#&gt; [1] April Maret Mei  
#&gt; 12 Levels: Desember &lt; November &lt; Oktober &lt; September &lt; Agustus &lt; ... &lt; Januari
</code></pre>

<p>We have now obtained the data ready for plotting.</p>

<h1 id="create-plot">Create Plot</h1>

<p>In this section, we will display the code for plotting followed by its result below. Try tracking on what has been added to the code and how it gives changes to the plot!</p>

<h2 id="the-canvas">The Canvas</h2>

<pre><code class="language-r"># blank canvas
p &lt;- ggplot(sakura.plot, aes(x = Year, y = day))

p
</code></pre>

<p><img src="/blog/2020-10-02-rplicate-series-cherry-bomb_files/figure-html/unnamed-chunk-10-1.png" width="672" style="display: block; margin: auto;" /></p>

<h2 id="add-facets">Add Facets</h2>

<pre><code class="language-r"># add facets_grid by month, horizontally
p + facet_grid(month~.)
</code></pre>

<p><img src="/blog/2020-10-02-rplicate-series-cherry-bomb_files/figure-html/unnamed-chunk-11-1.png" width="672" style="display: block; margin: auto;" /></p>

<pre><code class="language-r"># customize facets
p2 &lt;- p + facet_grid(month~., 
             scales = &quot;free&quot;, # free scales on both x &amp; y axis 
             space = &quot;free&quot;, # panel's height &amp; width will vary based on data
             switch = &quot;y&quot;) # facet label to be displayed on th right


p2
</code></pre>

<p><img src="/blog/2020-10-02-rplicate-series-cherry-bomb_files/figure-html/unnamed-chunk-12-1.png" width="672" style="display: block; margin: auto;" /></p>

<h2 id="add-geom-point">Add <code>geom_point</code></h2>

<p>The basic idea is to create a scatterplot from our data.</p>

<pre><code class="language-r"># basic idea
p2 + geom_point()
</code></pre>

<p><img src="/blog/2020-10-02-rplicate-series-cherry-bomb_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;" /></p>

<p>But let&rsquo;s make it more interesting by changing the point shape into a custom cherry blossom image. There are several ways to add custom shape as point (scatterplot) in ggplot:</p>

<p><strong>1. Use extended ASCII symbol in the argument <code>shape</code></strong></p>

<p>The standard shape in geom_point only has options from shape 1-25. The extended number is actually options for various ASCII characters. We can use the ASCII character number 42 to obtain a flower-like shape as seen below.</p>

<pre><code class="language-r">p3 &lt;- p2 + geom_point(shape = 42, size = 5, color = &quot;#f64b77&quot;)

p3
</code></pre>

<p><img src="/blog/2020-10-02-rplicate-series-cherry-bomb_files/figure-html/unnamed-chunk-14-1.png" width="672" style="display: block; margin: auto;" /></p>

<p><strong>2. Add image as point using <code>geom_image()</code></strong></p>

<p>We can use <code>geom_image()</code> from the package <strong>ggimage</strong> to add an image as a point in our plot. For that to work, we need to store the custom image into a column in our data. In this demo, we will use an icon made by <a href="https://www.flaticon.com/authors/freepik">Freepik</a> from <a href="https://www.flaticon.com">Flaticon</a>. This is our icon image that has been saved locally:</p>

<p><center> <img src="/img/rplicate2/cherry.png" alt="" />{width=&ldquo;60%&rdquo;} </center></p>

<pre><code class="language-r"># adding new column to store image
sakura.plot2 &lt;- sakura.plot %&gt;% 
  mutate(image = &quot;img/cherry.png&quot;)
</code></pre>

<pre><code class="language-r"># create plot
library(ggimage)

ggplot(sakura.plot2, aes(x = Year, y = day)) + 
  facet_grid(month~., scales = &quot;free&quot;, space = &quot;free_y&quot;, switch = &quot;y&quot;) +
  geom_image(aes(image = image))
</code></pre>

<p><img src="/blog/2020-10-02-rplicate-series-cherry-bomb_files/figure-html/unnamed-chunk-16-1.png" width="672" style="display: block; margin: auto;" /></p>

<p>The latter option seems to be more flexible, but unfortunately, the image cannot be displayed properly due to the small panel size (result from setting <code>space = &quot;free&quot;</code> in facets). For that reason, we will use the first option instead.</p>

<h2 id="add-geom-smooth">Add <code>geom_smooth</code></h2>

<p>Below we will add a smooth line using <code>geom_smooth()</code>. Because we also need legend for our smooth line, we can specify the color and fill label within <code>aes()</code>.</p>

<pre><code class="language-r">p4 &lt;- p3 +

  # make trend line
  geom_smooth(aes(fill = &quot;Trend&quot;), span = 0.1, se = FALSE, color = &quot;#644128&quot;) +
  
  # make confidence interval with no trend line
  geom_smooth(aes(color = &quot;Confidence Interval&quot;), span = 0.1, fill = &quot;#a56c56&quot;, linetype = 0)

p4
</code></pre>

<p><img src="/blog/2020-10-02-rplicate-series-cherry-bomb_files/figure-html/unnamed-chunk-17-1.png" width="672" style="display: block; margin: auto;" /></p>

<h2 id="costumize-axis">Costumize Axis</h2>

<p>We can specify our axis manually for our plot that (unfortunately) did not follow a specific sequence.</p>

<pre><code class="language-r">p5 &lt;- p4 + 
scale_x_continuous(
  limits = c(812,2020),
  breaks = c(800, 900, 1000, 1100, 1200, 1300, 1400, 1500, 1600, 1700, 1800, 1900, 2000, 2016),
  labels = c(&quot;800&quot;, &quot;&quot;, &quot;1000&quot;, &quot;&quot;, &quot;1200&quot;, &quot;&quot;, &quot;1400&quot;, &quot;&quot;, &quot;1600&quot;, &quot;&quot;, &quot;1800&quot;, &quot;&quot;, &quot;&quot;, &quot;2016&quot;)) +
scale_y_continuous(
  breaks = c(1, 10, 20),
  labels = c(&quot;1st&quot;, &quot;10th&quot;, &quot;20th&quot;))

p5
</code></pre>

<p><img src="/blog/2020-10-02-rplicate-series-cherry-bomb_files/figure-html/unnamed-chunk-18-1.png" width="672" style="display: block; margin: auto;" /></p>

<h2 id="add-labels">Add Labels</h2>

<p>We can add labels and make some of them italics using the function <code>expression()</code>:</p>

<pre><code class="language-r">p6 &lt;- p5 +
labs(title = &quot;Cherry Bomb&quot;, 
     subtitle = &quot;Date of cherry-blossom peak-bloom in Kyoto, Japan, 800AD - 2016&quot;,
     x = expression(italic(&quot;Year&quot;)),
     y = expression(italic(&quot;Date of cherry-blossom peak-bloom&quot;)),
     caption = &quot;Source: Yasuyuki Aono, Osaka Prefecture University&quot;)

p6
</code></pre>

<p><img src="/blog/2020-10-02-rplicate-series-cherry-bomb_files/figure-html/unnamed-chunk-19-1.png" width="672" style="display: block; margin: auto;" /></p>

<h2 id="costumize-theme">Costumize Theme</h2>

<p>Last but not least is to custom our theme. Below is an extensive list of options we can use to custom our plot theme, and there are still many more. You can try to modify this code and see how it affects our plot to better understand its use. We can also use a custom font which we have discussed in the previous article <a href="https://algotech.netlify.app/blog/rplicate-happiness-of-the-third-age/">&ldquo;Rplicate Series: Happiness of The Third Age&rdquo;</a>.</p>

<pre><code class="language-r">library(extrafont)

# importing fonts to R
# font_import() 

# load all fonts so it can be used
loadfonts(device = &quot;win&quot;) 
</code></pre>

<pre><code class="language-r">cherrybomb &lt;- p6 + theme(
  # general
  text = element_text(family = &quot;Segoe UI&quot;),
  
  # panel
  panel.background = element_rect(fill = &quot;white&quot;),
  panel.grid.major.y = element_line(color = &quot;#a56c56&quot;, 
                                    linetype = &quot;solid&quot;),
  panel.grid.major.x = element_blank(),
  panel.grid.minor = element_blank(),
  panel.spacing = unit(0.1, &quot;cm&quot;),
  
  # axis
  axis.line.x = element_line(colour = &quot;black&quot;),
  axis.line.y = element_blank(),
  axis.text = element_text(size = 8),
  axis.title = element_text(size = 8),
  
  # legends
  legend.position = c(0.81, 1),
  legend.key = element_blank(),
  legend.box = &quot;horizontal&quot;,
  legend.box.spacing = unit(1, &quot;mm&quot;),
  legend.title = element_blank(),
  legend.text = element_text(size = 8),
  legend.background = element_blank(),
  
  # labs
  plot.title = element_text(hjust = 0, 
                            face = &quot;bold&quot;, 
                            size = 12),
  plot.subtitle = element_text(hjust = 0, 
                               face = &quot;plain&quot;, 
                               size = 10),
  plot.caption = element_text(size = 8, 
                              colour = &quot;#B3B1B1&quot;, 
                              hjust = 0),
  
  # facets title
  strip.placement = &quot;outside&quot;,
  strip.background = element_rect(fill = &quot;#e8dbd6&quot;),
  strip.switch.pad.grid = unit(0.2, &quot;cm&quot;),
  strip.text = element_text(size = 7))
</code></pre>

<p>And here is our final Cherry Bomb Plot!</p>

<pre><code class="language-r">cherrybomb
</code></pre>

<p><img src="/blog/2020-10-02-rplicate-series-cherry-bomb_files/figure-html/unnamed-chunk-22-1.png" width="672" style="display: block; margin: auto;" /></p>

<h1 id="additional-notes">Additional Notes</h1>

<p>This graph was both fun and challenging to make. Unfortunately, we have not managed to replicate one minor detail. If you take a more detailed look at the plot, we still have an <strong>uncomplete label for the tickmarks in the y-axis</strong>. I find it difficult to create different y-axis tickmarks and their labels for each facet in the plot. It is very unfortunate that the facet_grid function is not yet provided with the ability to have/set different scales/limits and breaks for each facet. And yet, I also haven&rsquo;t found a way to assign different breaks and limits for each facet. Thankfully the communities are developing it right now. For more info, you can <a href="https://github.com/zeehio/facetscales">click here</a>.</p>

<p>Thank you for reading and we hope this article can help you to find the delight in exploring data visualization in R. Happy learning and coding!</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1">Contents of Sakura or Cherry-blossom tree phenological data on Excel format was partly added, replaced re-edited, and reconstructed by Aono and Kazui (2008); Aono and Saito (2010); Aono, 2012.
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
<li id="fn:2">Aono (2012; Chikyu Kankyo (Global Environment), 17, 21-29) 
 <a class="footnote-return" href="#fnref:2"><sup>[return]</sup></a></li>
</ol>
</div>

  </div>

  <footer>
    <ul class="stats">
  <li class="categories">
    <ul>
        
            
            
                <i class="fa fa-folder"></i>
                
                
                <li><a class="article-category-link" href="/categories/r">R</a></li>
                
            
        
    </ul>
  </li>
  <li class="tags">
    <ul>
        
            
            
                <i class="fa fa-tags"></i>
                
                
                <li><a class="article-category-link" href="/tags/data-visualization">Data Visualization</a></li>
                
                
                <li><a class="article-category-link" href="/tags/ggplot2">ggplot2</a></li>
                
                
                <li><a class="article-category-link" href="/tags/rplicate">Rplicate</a></li>
                
            
        
    </ul>
  </li>
</ul>

  </footer>

</article>

    <article class="post">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "https-algotech-netlify-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </article>


<ul class="actions pagination">
    
        <li><a href="/blog/skincare-recommender-system/"
                class="button big previous">Skincare Recommendation System</a></li>
    

    
        <li><a href="/blog/interpreting-black-box-regression-model-with-lime/"
                class="button big next">Interpreting Black Box Regression Model with LIME</a></li>
    
</ul>


    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
      
        <a href='/'><img src="/img/main/logo.png" class="intro-circle" width="30%" alt="Hugo Future Imperfect" /></a>
      
    
    
      <header>
        <h2>Algoritma Technical Blog</h2>
        <p>We're a group of people who teach data science to individuals, trains companies and their employees to better profit from data. We care about the development of data science and a sense of community that connects our alumni and team with one another. To learn more about our approach to data science problems, feel free to hop over to our blog.</p>
      </header>
    
    
      <ul class="icons">
        
        
  <li><a href="//github.com/teamalgoritma" target="_blank" title="GitHub" class="fa fa-github"></a></li>



























  <li><a href="//linkedin.com/company/teamalgoritma" target="_blank" title="LinkedIn Company" class="fa fa-linkedin"></a></li>









  <li><a href="//facebook.com/teamalgoritma" target="_blank" title="Facebook" class="fa fa-facebook"></a></li>





















  <li><a href="//instagram.com/teamalgoritma" target="_blank" title="Instagram" class="fa fa-instagram"></a></li>





  <li><a href="//twitter.com/teamalgoritma" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>




















      </ul>
    
  </section>

  
  <section class="recent-posts">
    <div class="mini-posts">
      <header>
        <h3>Upcoming Workshop</h3>
      </header>
      <div class="posts-container">
          <article class="mini-post">
            <header>
              <h3>
                
                                <img src="/img/2020/ads/dss.png", alt="alternatetext", width="270" height="340">
                <a href="https://algorit.ma/text-analysis/?utm_source=algotech">More details</a>
                
                <img src="/img/2020/ads/ddt.png", alt="alternatetext", width="270" height="340">
                <a href="https://algorit.ma/data-driven-2/?utm_source=algotech">More details</a>
              </h3>
            </header>
          </article>
      </div>

      
      
    </div>
  </section>

  
  
  

  
  

  
  <section id="footer">
    <p class="copyright">
      
        &copy; 2020
        
          Algoritma Technical Blog
        
      .
      Powered by <a href="//gohugo.io" target="_blank">Hugo</a>
    </p>
  </section>
</section>

    </div>
    <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
    <style>
      .footer {
        position: fixed;
        left: 0;
        bottom: 0;
        width: 100%;
        height:50px; 
        background-color: black;
        color: white;
        text-align: center;
        padding-top: 15px;
        padding-bottom: 15px;
        padding-left: 50px;
        padding-right: 50px;
}
      }


      </style>

      <div class="footer">
        <p>
          Want to know more about our workshop?
          <a href="https://algorit.ma/?utm_source=algotech&utm_medium=content&utm_campaign=rplicate-series-cherry-bomb" style="color: rgb(197, 38, 38)"> Visit our main website here</a> <br>
        </p>
          
      </div>
    

    
      
    

    
      
      
      
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>
        
        
        
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/css.min.js"></script>
        <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
      
    
    
    
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>
      <script src="/js/util.js"></script>
      <script src="/js/main.js"></script>
      <script src="/js/backToTop.js"></script>
    

    
      
        
      
        
          <script src="/js/bootstrap.min.js"></script>
        
      
    

    
    <script>hljs.initHighlightingOnLoad();</script>
      <script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


  </body>
</html>

